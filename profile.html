<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Seller Profile - JijiClone</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <a href="index.html" class="logo">JijiClone</a>
            </div>
            <div class="nav-search">
                <div class="search-box">
                    <input type="text" placeholder="Search for anything..." id="main-search">
                    <select id="location-select">
                        <option value="all">All Nigeria</option>
                        <option value="lagos">Lagos</option>
                        <option value="abuja">Abuja</option>
                        <option value="kano">Kano</option>
                        <option value="ibadan">Ibadan</option>
                        <option value="benin">Benin City</option>
                    </select>
                    <button class="search-btn">
                        <i class="fas fa-search"></i>
                    </button>
                </div>
            </div>
            <div class="nav-links">
                <a href="post.html" class="nav-link post-btn">Post Ad</a>
                <a href="messages.html" class="nav-link">Messages</a>
                <a href="wishlist.html" class="nav-link">
                    <i class="fas fa-heart"></i>
                    <span class="wishlist-count">0</span>
                </a>
                <div class="nav-dropdown">
                    <button class="nav-dropdown-btn">
                        <i class="fas fa-user"></i>
                        Account
                        <i class="fas fa-chevron-down"></i>
                    </button>
                    <div class="nav-dropdown-menu">
                        <a href="profile.html" class="active">My Profile</a>
                        <a href="login.html">Login</a>
                        <a href="register.html">Register</a>
                        <a href="#" onclick="logout()">Logout</a>
                    </div>
                </div>
            </div>
            <div class="nav-mobile-toggle">
                <i class="fas fa-bars"></i>
            </div>
        </div>
    </nav>

    <!-- Profile Page -->
    <div class="profile-page">
        <div class="container">
            <!-- Profile Header -->
            <div class="profile-header" id="profile-header">
                <!-- Profile content loaded dynamically -->
            </div>

            <!-- Profile Tabs -->
            <div class="profile-tabs">
                <button class="tab-btn active" data-tab="listings">
                    <i class="fas fa-list"></i>
                    My Listings
                </button>
                <button class="tab-btn" data-tab="reviews">
                    <i class="fas fa-star"></i>
                    Reviews
                </button>
                <button class="tab-btn" data-tab="settings">
                    <i class="fas fa-cog"></i>
                    Settings
                </button>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                <!-- Listings Tab -->
                <div class="tab-panel active" data-panel="listings">
                    <div class="listings-header">
                        <h3>My Product Listings</h3>
                        <div class="listings-stats">
                            <span class="stat">
                                <strong id="total-listings">0</strong>
                                <small>Total Listings</small>
                            </span>
                            <span class="stat">
                                <strong id="active-listings">0</strong>
                                <small>Active</small>
                            </span>
                            <span class="stat">
                                <strong id="sold-listings">0</strong>
                                <small>Sold</small>
                            </span>
                        </div>
                    </div>
                    
                    <div class="listings-filters">
                        <select id="status-filter">
                            <option value="all">All Listings</option>
                            <option value="active">Active</option>
                            <option value="sold">Sold</option>
                            <option value="expired">Expired</option>
                        </select>
                        <select id="category-filter-profile">
                            <option value="all">All Categories</option>
                        </select>
                    </div>

                    <div id="user-listings" class="user-listings">
                        <!-- User listings loaded dynamically -->
                    </div>
                </div>

                <!-- Reviews Tab -->
                <div class="tab-panel" data-panel="reviews">
                    <div class="reviews-summary">
                        <div class="rating-overview">
                            <div class="average-rating">
                                <span class="rating-number" id="average-rating">0.0</span>
                                <div class="stars" id="rating-stars">
                                    <!-- Stars loaded dynamically -->
                                </div>
                                <span class="total-reviews" id="total-reviews">0 reviews</span>
                            </div>
                            <div class="rating-breakdown" id="rating-breakdown">
                                <!-- Rating breakdown loaded dynamically -->
                            </div>
                        </div>
                    </div>

                    <div id="reviews-list" class="reviews-list">
                        <!-- Reviews loaded dynamically -->
                    </div>
                </div>

                <!-- Settings Tab -->
                <div class="tab-panel" data-panel="settings">
                    <div class="settings-section">
                        <h3>Account Settings</h3>
                        <form id="profile-settings-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Full Name</label>
                                    <input type="text" id="settings-name" required>
                                </div>
                                <div class="form-group">
                                    <label>Email</label>
                                    <input type="email" id="settings-email" required>
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Phone Number</label>
                                    <input type="tel" id="settings-phone" required>
                                </div>
                                <div class="form-group">
                                    <label>Location</label>
                                    <select id="settings-location">
                                        <option value="lagos">Lagos</option>
                                        <option value="abuja">Abuja</option>
                                        <option value="kano">Kano</option>
                                        <option value="ibadan">Ibadan</option>
                                        <option value="benin">Benin City</option>
                                        <option value="kaduna">Kaduna</option>
                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Bio</label>
                                <textarea id="settings-bio" rows="4" placeholder="Tell buyers about yourself..."></textarea>
                            </div>

                            <button type="submit" class="btn-primary">Update Profile</button>
                        </form>
                    </div>

                    <div class="settings-section">
                        <h3>Privacy Settings</h3>
                        <div class="settings-options">
                            <label class="setting-option">
                                <input type="checkbox" id="show-phone">
                                <span class="setting-label">Show phone number on listings</span>
                            </label>
                            <label class="setting-option">
                                <input type="checkbox" id="show-email">
                                <span class="setting-label">Show email address on listings</span>
                            </label>
                            <label class="setting-option">
                                <input type="checkbox" id="email-notifications">
                                <span class="setting-label">Receive email notifications</span>
                            </label>
                        </div>
                    </div>

                    <div class="settings-section">
                        <h3>Change Password</h3>
                        <form id="change-password-form">
                            <div class="form-group">
                                <label>Current Password</label>
                                <input type="password" id="current-password" required>
                            </div>
                            <div class="form-group">
                                <label>New Password</label>
                                <input type="password" id="new-password" required>
                            </div>
                            <div class="form-group">
                                <label>Confirm New Password</label>
                                <input type="password" id="confirm-password" required>
                            </div>
                            <button type="submit" class="btn-primary">Change Password</button>
                        </form>
                    </div>

                    <div class="settings-section danger-zone">
                        <h3>Danger Zone</h3>
                        <p>Once you delete your account, there is no going back.</p>
                        <button class="btn-danger" onclick="confirmDeleteAccount()">Delete Account</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit Listing Modal -->
    <div id="edit-listing-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Edit Listing</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <form id="edit-listing-form">
                    <div class="form-group">
                        <label>Title</label>
                        <input type="text" id="edit-title" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Price (â‚¦)</label>
                            <input type="number" id="edit-price" required>
                        </div>
                        <div class="form-group">
                            <label>Condition</label>
                            <select id="edit-condition" required>
                                <option value="new">Brand New</option>
                                <option value="used">Fairly Used</option>
                                <option value="refurbished">Refurbished</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="edit-description" rows="4" required></textarea>
                    </div>
                    <div class="modal-actions">
                        <button type="button" class="btn-secondary" onclick="closeModal('edit-listing-modal')">Cancel</button>
                        <button type="submit" class="btn-primary">Save Changes</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Delete Confirmation Modal -->
    <div id="delete-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Delete Listing</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to delete this listing? This action cannot be undone.</p>
                <div class="modal-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('delete-modal')">Cancel</button>
                    <button type="button" class="btn-danger" id="confirm-delete">Delete</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Spinner -->
    <div id="loading-spinner" class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <script src="js/data.js"></script>
    <script src="js/api.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Initialize profile page
        document.addEventListener('DOMContentLoaded', function() {
            const sellerId = getUrlParam('id') || getCurrentUserId();
            loadSellerProfile(sellerId);
            updateWishlistCount();
        });
    </script>
</body>
</html>